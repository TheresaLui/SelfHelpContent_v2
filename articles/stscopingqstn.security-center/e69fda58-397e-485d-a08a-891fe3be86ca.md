<properties
  pagetitle="Azure Security Center Recommendations self-help guide"
  service=""
  resource=""
  ms.author="elsagie"
  selfhelptype="Generic"
  supporttopicids="32693227,32693235,32749432"
  productpesids="15947"
  cloudenvironments="public, fairfax, mooncake, blackforest, ussec, usnat"
  articleid="e69fda58-397e-485d-a08a-891fe3be86ca"
  ownershipid="Azure_Security_Security_Center" />
# Azure Security Center Recommendations self-help guide

### Security Recommendations

A given recommendation will be removed if one of the following conditions is true:

- All the resources under this recommendation have become healthy
- The recommendation is disabled from the Azure Policy

If you have followed the [**Remediation steps**](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations#remediation-steps) or the  [**Quick Fix remediation**](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations#quick-fix-remediation) and the resource is still showing as unhealthy, this can be caused by one of the following factors:

- The recommendation is not refreshed. The recommendation refresh time is displayed on the recommendation page, so check that this time has passed.
- The Azure Security Center has not received the new data from the Log Analytics Monitoring agent in the VM
- The remediation steps are not complete or not precise
- You have an Azure Policy custom initiative that contains a policy contradicting the default built-in security policy

**Note about Security Recommendations and Security Policies**  
Azure Security Policy and ASC Recommendations were never meant to be in one-to-one alignment. We are performing ongoing improvements for ASC regarding policy management, which will improve the alignment, depending on Azure Policy capabilities. The main reasons for the discrepancies are as follows:

- Many recommendations (more than one) are mapped to a single policy
- ASC has three states for a recommendation (Unhealthy resources, Healthy resources, Not applicable resources), whereas security policy has only 2 (Compliant, Noncompliant). ASC maps the "Not applicable resources" to the "Noncompliant" policy state.
- There is a limit to Policy insights pages for many resources
- For some recommendations, ASC may employ further analysis regarding a resource, which may result in a different state of compliance base on its internal heuristics

### Troubleshooting Recommendation Remediation

1. Azure Security Center uses Azure Policy as its main policy engine. To check the recommendation status in Azure Policy compliance center, do the following:
   * Check the [recommendations reference guide](https://docs.microsoft.com/azure/security-center/recommendations-reference) and find the related policy
   * Go to **Azure Policy Portal** > **Compliance** > **Azure Security Center default assignment (ASC Default (subscription: \<subId\>)**
   * Search for the relevant policy
   * Validate if the resource is compliant or not

2. Check that the VM Log Analytics Monitor agent is running and healthy, sending a valid heartbeat. Read more about the [Log Analytics agent in ASC](https://docs.microsoft.com/azure/security-center/faq-data-collection-agents#what-is-the-log-analytics-agent).
3. [View and remediate findings from vulnerability assessment solutions on your VMs](https://docs.microsoft.com/azure/security-center/remediate-vulnerability-findings-vm)
4. Check the recommendation in [Azure Resource Graph (ARG)](https://docs.microsoft.com/azure/governance/resource-graph/) using this query:

   ```
   securityresources
   | where type == "microsoft.security/assessments"
   ```
   The preceding ARG output should reflect your recommendations as they appear in the portal. Any discrepancy may indicate an issue. Please add the issue to your support request.

### API Recommendations
* In the API, Recommendations are referred to as [Assessments](https://docs.microsoft.com/rest/api/securitycenter/assessments). You have these actions available in REST API: Create Or Update, Get, List, Delete. 
* [SubAssessments](https://docs.microsoft.com/rest/api/securitycenter/subassessments), also referred to as Nested Recommendations, are the findings of Vulnerabilities Assessments tools or the Security Configurations scanner

## **Recommended Documents**

* [Remediate recommendations in Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations)
* [Security recommendations in Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-recommendations)
* [Security recommendations - a reference guide](https://docs.microsoft.com/azure/security-center/recommendations-reference)
* [Exempt a resource from recommendations and secure score](https://docs.microsoft.com/azure/security-center/exempt-resource)
* [Working with security policies](https://docs.microsoft.com/azure/security-center/tutorial-security-policy)
* [Azure Policy built-in definitions for Azure Security Center](https://docs.microsoft.com/azure/security-center/policy-reference)
* [Create automatic responses to alerts and recommendations with workflow automation](https://docs.microsoft.com/azure/security-center/workflow-automation)
* [Use Azure Security Center recommendations to enhance security](https://docs.microsoft.com/azure/security-center/security-center-using-recommendations)
* [Prevent misconfigurations with Enforce/Deny recommendations](https://docs.microsoft.com/azure/security-center/prevent-misconfigurations)
* [Secure score in Azure Security Center](https://docs.microsoft.com/azure/security-center/secure-score-security-controls)

### Troubleshooting

* [ASC Troubleshooting Guide](https://docs.microsoft.com/azure/security-center/security-center-troubleshooting-guide)

### FAQ

* [ASC FAQ](https://docs.microsoft.com/azure/security-center/security-center-faq)
