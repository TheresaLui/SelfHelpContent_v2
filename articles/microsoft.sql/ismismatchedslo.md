<properties
	pageTitle="Mismatched SLO (Redo Lag) - GeoDR"
	description="Redo Lag"
	infoBubbleText="Found GeoDR related issues with Mismatched SLO(s)"
	service="microsoft.sql"
	resource="servers"
	authors="subbu-kandhaswamy, VMMicrosoft"
	ms.author="subbuk, vimahadi"
	displayOrder=""
	articleId="MismatchedSLOs_AC7025F5-55EA-4DB5-918C-155E13653C30"
	diagnosticScenario="crc_sqldb_connectivity"
	selfHelpType="rca"
	supportTopicIds="31980414"
	resourceTags=""
	productPesIds="13491"
	cloudEnvironments="public"
/>

# We ran diagnostics on your resource and found an issue

<!--issueDescription-->
Geo Replication feature leverages SQL Server to asynchronously replicate committed transactions on the primary database to a secondary database. In a Geo Replication environment, both Geo-Primary and Geo-Secondary replicas are ideally required to have same service tier, with same or varying compute size (DTU's & vCores). However, it's highly recommended that the Geo-Secondary replicas be created with the same compute size as the Geo-Primary. A Geo-Secondary with lower compute size is at risk of an increased replication lag, potential unavailability and consequently at risk of substantial data loss after a fail-over.

In this case, the service level objectives between the Geo-Primary and the Geo-Secondary database are largely different. The log was held up by the redo lagging on the Geo-Secondary instead of the active transaction. The logs generated by the Geo-Primary are replicated to Geo-Secondaries and are redone/replayed on the Geo-Secondaries.
The Geo-Primary cannot truncate a log record until it has been redone on the all Geo-Secondaries. We enabled a parallel redo feature to speed up the redo, and in most cases, the redo on the Geo-Secondaries should be able to keep up with the primary. However, in rare cases, the redo work on the Geo-Secondary's end has to be serialized and this may cause redo lagging when the log generation rate on the primary is very high. This may force availability issues until the logs have been caught up.

Our product team is actively working on the redo improvements to minimize the redo lagging issues caused by mismatched SLOs.
<!--/issueDescription-->

## **Recommended Documents**

* [Troubleshoot, diagnose, and prevent SQL connection errors and transient errors for SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-connectivity-issues)
* [Database connection errors](https://docs.microsoft.com/azure/sql-database/sql-database-develop-error-messages#database-connection-errors-transient-errors-and-other-temporary-errors)
