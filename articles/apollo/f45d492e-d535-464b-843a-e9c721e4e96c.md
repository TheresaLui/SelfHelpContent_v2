<properties
  pagetitle="Issues signing in to Gallery and 'Bring your own apps' applications"
  description=""
  service=""
  resource=""
  ms.author="shchaur"
  selfhelptype="apollo"
  supporttopicids="c07cb7bb-2e79-a0ff-6dc4-348163d863a8"
  productpesids="16575"
  cloudenvironments="public,fairfax,mooncake,blackforest,ussec,usnat"
  disableclouds=""
  articleid="f45d492e-d535-464b-843a-e9c721e4e96c"
  ownershipid="AzureIdentity_EnterpriseApps"
  resourcerequired="False" />
# Issues Signing in to Gallery and 'Bring your own apps' applications

## Resolve Issues Signing in to Gallery and 'Bring your own apps' applications

Resolve Single sign-in configuration issues using insights from recommended solutions below- 

:::Section Deploy Single Sign-On for SaaS applications:::   

### Learn how to deploy Single Sign-On for SaaS applications added from the Gallery 

 <video> 
    <src>https://www.youtube.com/watch?v=kSfiDDNg14U</src>   
    <title>How to deploy Single Sign-On for SaaS applications</title> 
   </video>  

If you are having problems configuring Single Sign-on to your application, the following articles can help resolve most of your issues- 

* [Tutorial on integrating SaaS applications with Azure AD and configuring Single Sign-on (SSO)](https://docs.microsoft.com/azure/active-directory/saas-apps/tutorial-list) 
* [I can’t add Identifier or Reply URL/set Identifier format/add another instance of application](https://docs.microsoft.com/azure/active-directory/manage-apps/troubleshoot-saml-based-sso?WT.mc_id=UI_AAD_Enterprise_Apps_Support_L2_Overview) 
* [Learn about SAML configuration settings (Reply URL, Logout URL, Sign-on URL, Identifier)](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-saml-single-sign-on#saml-signing-certificate) 
* I need assistance configuring [SAML based Single sign-on](https://docs.microsoft.com/azure/active-directory/manage-apps/add-application-portal-setup-sso) or [OIDC based Single sign-on](https://docs.microsoft.com/azure/active-directory/manage-apps/add-application-portal-setup-oidc-sso) 
* [Learn how to Configure SAML-based single sign-on using Microsoft Graph APIs](https://docs.microsoft.com/graph/application-saml-sso-configure-api?tabs=http#step-4-configure-signing-certificate)

:::Section Troubleshoot SAML based SSO configuration issues with Azure Active Directory:::   

### Learn how to test SAML based Single Sign-on configuration with Azure Active Directory 

   <video> 
    <src>https://www.youtube.com/watch?v=poQCJK0WPUk</src>   
    <title>How to test SAML based Single Sign-On configuration with Azure Active Directory</title> 
   </video> 

### Common error codes

| Error code | Troubleshooting steps |
|:--|:--|
| [Error AADSTS50011 - The reply URL specified in the request does not match the reply URLs configured for the application](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts50011-reply-url-mismatch) | The reply address is missing, misconfigured, or does not match reply addresses configured for the app. As a resolution, ensure to add this missing reply address to the Azure Active Directory application or have someone with the permissions to manage your application in Active Directory do this for you |
| [Error AADSTS650056 - Misconfigured application](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts650056-misconfigured-app) | The Issuer attribute sent from the application to Azure AD in the SAML request doesn’t match the Identifier value configured for the application in Azure AD. Ensure that the Issuer attribute in the SAML request matches the Identifier value configured in Azure AD. Verify that the value in the Identifier textbox matches the value for the identifier value displayed in the error |
| [Error AADSTS70001 - Application with Identifier was not found in the directory](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts70001-app-not-found-in-directory) | UnauthorizedClient - The application is disabled. To learn more, see the troubleshooting article for error AADSTS70001 |
| [Error AADSTS50105 - The signed in user is not assigned to a role for the application](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts50105-user-not-assigned-role) | The user has not been granted access to the application in Azure AD.To assign one or more users to an application directly, see [Quickstart: Assign users to an app](https://docs.microsoft.com/azure/active-directory/manage-apps/add-application-portal-assign-users) |
| [Error AADSTS750054 - SAMLRequest or SAMLResponse must be present as query string parameters in HTTP request for SAML Redirect binding](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts750054-saml-request-not-present) | Azure AD wasn’t able to identify the SAML request within the URL parameters in the HTTP request. This can happen if the application is not using HTTP redirect binding when sending the SAML request to Azure AD. The application needs to send the SAML request encoded into the location header using HTTP redirect binding. For more information about how to implement it, read the section HTTP Redirect Binding in the [SAML protocol specification document](https://docs.oasis-open.org/security/saml/v2.0/saml-bindings-2.0-os.pdf) |
| [Error - AADSTS75011 Authentication method by which the user authenticated with the service doesn't match requested authentication method AuthnContextClassRef](https://docs.microsoft.com/troubleshoot/azure/active-directory/error-code-aadsts75011-auth-method-mismatch) | The authentication method by which the user authenticated with the service doesn't match requested authentication method. RequestedAuthnContext is an optional value. Then, if possible, ask the application if it could be removed. Another option is to make sure the RequestedAuthnContext will be honored. This will be done by requesting a fresh authentication. By doing this, when the SAML request is processed, a fresh authentication will be done and the AuthnContext will be honored. To request a Fresh Authentication the SAML request most contain the value forceAuthn="true" |

Resolve [AADSTS errors](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes?WT.mc_id=Portal-Microsoft_Azure_Support) & [Troubleshoot signing in to SAML based SSO configured apps](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-federated-sso-gallery?WT.mc_id=UI_AAD_Apps_Sign_In_Support_L2_Gallery)

If you are unable to sign-in to Single Sign-on configured applications, the following articles can help resolve most of your issues - 

* [Debug SAML based SSO issues through SSO Testing experience](https://docs.microsoft.com/azure/active-directory/manage-apps/debug-saml-sso-issues) 
* [I can sign-in to my application but I’m seeing an error on the application sign-in page](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-problem-application-error?WT.mc_id=UI_AAD_Apps_Sign_In_Support_L2_Gallery)

:::Section Resolve User consent and Admin consent errors::: 

### Learn about adding API permissions to an application via Consent process   

The following video talks about Delegated and Application permissions required to access application data through Microsoft Graph and how to add them via consent process 

 <video>  
    <src>https://www.youtube.com/watch?v=yXYzgWWVdSM</src>    
    <title>Getting started with Microsoft Graph and consent permissions</title>  
   </video> 

Resolve Single sign-in configuration issues using insights from recommended solutions below-

**I’m having trouble accessing my application and getting Admin consent related errors** 

* I want to [Configure Admin consent workflow](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-admin-consent-workflow) and [Grant tenant-wide admin consent](https://docs.microsoft.com/azure/active-directory/manage-apps/grant-admin-consent#:~:text=The%20Global%20Administrator%20role%20is,to%20the%20Microsoft%20Graph%20API.&text=before%20granting%20consent.-,The%20Global%20Administrator%20role%20is%20required%20in%20order%20to%20provide,to%20the%20Microsoft%20Graph%20API)
* [Evaluate a request for tenant-wide admin consent](https://docs.microsoft.com/azure/active-directory/manage-apps/manage-consent-requests#evaluating-a-request-for-tenant-wide-admin-consent) & [Manage user and admin permissions](https://docs.microsoft.com/azure/active-directory/manage-apps/manage-application-permissions)
* [Configure how end-users consent to applications using Azure AD](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-user-consent?tabs=azure-portal#user-consent-settings)
* [I see unexpected error when performing consent to an application](https://docs.microsoft.com/azure/active-directory/manage-apps/application-sign-in-unexpected-user-consent-error)
* Remove ‘prompt =consent’ setting from the application (if present), so it doesn't cause required consent to go on a loop between admin consent and user request for the app
* [How do I ensure that the application is publisher verified to avoid consent errors](https://docs.microsoft.com/azure/active-directory/develop/publisher-verification-overview)  

 <video>  
    <src>https://www.youtube.com/watch?v=IYRN2jDl5dc</src>    
    <title>Learn about Publisher verification</title>  
   </video> 

:::Section Questions about SAML certificates, Keys and secrets 

Resolve Single sign-in configuration issues using insights from recommended solutions below- 

**I have questions about SAML certificates, Keys and Secrets**

* How to [create a client secret](https://docs.microsoft.com/azure/active-directory/develop/howto-create-service-principal-portal#option-2-create-a-new-application-secret) and [certificate signing options & algorithms](https://docs.microsoft.com/azure/active-directory/manage-apps/certificate-signing-options)
* [Monitor my certificate/client secret expiry OR I’m not receiving email notifications for certificate expiration](https://docs.microsoft.com/azure/active-directory/manage-apps/app-management-powershell-samples)
* [I want to customize expiration date for my certificate/create or renew my SAML certificate](https://docs.microsoft.com/azure/active-directory/manage-apps/manage-certificates-for-federated-single-sign-on#customize-the-expiration-date-for-your-federation-certificate-and-roll-it-over-to-a-new-certificate)
* [I want to understand how Signing Key rollover affects my application](https://docs.microsoft.com/azure/active-directory/develop/active-directory-signing-key-rollover)

:::Section Questions on SAML token claims and attributes 

### Understand the difference between ID, access, refresh and session tokens

 <video>  
    <src>https://www.youtube.com/watch?v=41vmzPdbfXM</src>    
    <title>Understand the difference between ID, access, refresh and session tokens</title>  
   </video> 

Resolve Single sign-in configuration issues using insights from recommended solutions below-

* [Set token lifetime](https://docs.microsoft.com/azure/active-directory/develop/configure-token-lifetimes#create-a-policy-for-web-sign-in) & [Configure User sign-in frequency](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-conditional-access-session-lifetime#user-sign-in-frequency) for [Refresh tokens and session tokens](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes#token-lifetime-policies-for-refresh-tokens-and-session-tokens)
* [Group claims are not sent for user during SSO login if a user is a member of more than 150 groups (SAML) or 200 groups (JWT)](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-fed-group-claims#options-for-applications-to-consume-group-information). It is recommended to [emit only groups assigned to the app](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-fed-group-claims#add-group-claims-to-tokens-for-saml-applications-using-sso-configuration)

<video>  
<src>https://www.youtube.com/watch?v=-BK2iBDrmNo</src>  
<title>Best practices to use Application roles and security groups</title>   
</video>   

:::Section Problems while managing users or groups to an application::: 

### Learn about best practices to use Application roles and security groups 

<video>  
<src>https://www.youtube.com/watch?v=-BK2iBDrmNo</src>  
<title>Best practices to use Application roles and security groups</title>   
</video>     

The following information will help you resolve most of the issues -  

* How to [create/update/delete application roles using APIs](https://docs.microsoft.com/azure/active-directory/develop/active-directory-enterprise-app-role-management) OR [through Azure portal](https://docs.microsoft.com/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps#app-roles-ui--preview)
* How to [assign/unassign users or groups to an app](https://docs.microsoft.com/azure/active-directory/manage-apps/assign-user-or-group-access-portal) & [restrict my Azure AD app to a set of users](https://docs.microsoft.com/azure/active-directory/develop/howto-restrict-your-app-to-a-set-of-users#enterprise-applications-requires-the-global-administrator-role)