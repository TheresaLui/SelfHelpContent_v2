<properties
  pagetitle="Azure Security Center Recommendations self-help guide"
  service=""
  resource=""
  ms.author="elsagie"
  selfhelptype="Generic"
  supporttopicids="32693227,32693234,32693235,32693243,32693247,32749432"
  productpesids="15947"
  cloudenvironments="public, fairfax, mooncake, blackforest, ussec, usnat"
  articleid="e69fda58-397e-485d-a08a-891fe3be86ca"
  ownershipid="Azure_Security_Security_Center" />
# Azure Security Center Recommendations self-help guide

### Security Recommendations

A given recommendation will be removed if one of the following conditions is true:

- All the resources under this recommendation become healthy
- The recommendation is disable from the Azure policy

If you have followed the [**Remediation steps**](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations#remediation-steps) or the  [**Quick Fix remediation**](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations#quick-fix-remediation) and the resource is still showing as unhealthy, this issue can be caused by one of the following factors:

- The Recommendations is not refreshed. The Recommendations refresheness time is presented on the recommendation page, make sure this time has passed.
- The security Center has not received the new data from the Log Analytics Monitoring agent in the VM
- The remediation steps are not complete or not precise
- You have Azure Policy custom initiative containing a policy contradicting the default built-in security policy

**Note about Security Recommendations and Security Policies**  
Security policy and ASC Recommendations were never meant to be 1x1 reflection. An ongoing improvement work ASC are doing with policy management will get this closer, also depending on Azure Policy capabilities. Some of the main reasons resulting the discrepancies are:

- Many recommendations are mapped many to one â€“ meaning more than one recommendation is mapped to a single policy
- ASC have 3 states for a recommendation (Unhealthy resources, Healthy resources, Not applicable resources) while policy have only 2 (Compliant, Non-compliant). ASC map the "Not applicable resources" to the "non-compliant" policy state.
- Policy insights paging limitation on large number of resources
- On some recommendations ASC may employ further analysis on a resource which may conclude different state of compliance base on its internal heuristics

### Troubleshooting Recommendation Remediation

1. Azure security center uses Azure policy as its main policy engine. Check the recommendation status in Azure Policy compliance center, to do so please:
   * Check the [recommendations reference guide](https://docs.microsoft.com/azure/security-center/recommendations-reference) and find the related policy
   * Go to Azure Policy Portal -> Compliance -> Azure security center default assignment (ASC Default (subscription: \<subId\>)
   * Search for the relevant policy
   * Validate if the resource is compliant or not

2. Check that the VM Log Analytics Monitor agent is running and healthy, sending valid heatbeat. Read more about [Log Analytics agent in ASC](https://docs.microsoft.com/azure/security-center/faq-data-collection-agents#what-is-the-log-analytics-agent).
3. [View and remediate findings from vulnerability assessment solutions on your VMs](https://docs.microsoft.com/azure/security-center/remediate-vulnerability-findings-vm)
4. Check the Recommendation in [Azure Resource Graph (ARG)](https://docs.microsoft.com/azure/governance/resource-graph/) using this query:
   ```
   securityresources
   | where type == "microsoft.security/assessments"
   ```
   The above ARG output should reflect your recommendations as it appear in the portal. Any discrepancy may indicate on a problem. Please add it to your support request.
   
   
### API Recommendations
* In API Recommendations referred to as [Assessments](https://docs.microsoft.com/rest/api/securitycenter/assessments). You have these actions available in REST API: Create Or Update, Get, List, Delete. 
* [SubAssessments](https://docs.microsoft.com/rest/api/securitycenter/subassessments), also referred to as Nested Recommendations, are the findings of Vulnerabilities Assessments tools or Security Configurations scanner

## **Recommended Documents**

* [Remediate recommendations in Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-remediate-recommendations)
* [Security recommendations in Azure Security Center](https://docs.microsoft.com/azure/security-center/security-center-recommendations)
* [Security recommendations - a reference guide](https://docs.microsoft.com/azure/security-center/recommendations-reference)
* [Exempt a resource from recommendations and secure score](https://docs.microsoft.com/azure/security-center/exempt-resource)
* [Working with security policies](https://docs.microsoft.com/azure/security-center/tutorial-security-policy)
* [Azure Policy built-in definitions for Azure Security Center](https://docs.microsoft.com/azure/security-center/policy-reference)
* [Create automatic responses to alerts and recommendations with workflow automation](https://docs.microsoft.com/azure/security-center/workflow-automation)
* [Use Azure Security Center recommendations to enhance security](https://docs.microsoft.com/azure/security-center/security-center-using-recommendations)
* [Prevent misconfigurations with Enforce/Deny recommendations](https://docs.microsoft.com/azure/security-center/prevent-misconfigurations)
* [Secure score in Azure Security Center](https://docs.microsoft.com/azure/security-center/secure-score-security-controls)

### Troubleshooting

* [ASC Troubleshooting Guide](https://docs.microsoft.com/azure/security-center/security-center-troubleshooting-guide)

### FAQ

* [ASC FAQ](https://docs.microsoft.com/azure/security-center/security-center-faq)
