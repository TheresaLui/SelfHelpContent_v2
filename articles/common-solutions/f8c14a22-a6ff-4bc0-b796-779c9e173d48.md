<properties
  pagetitle="Azure Sentinel - Data collection - Connectors based on Agents, OMS and MMA"
  service=""
  resource=""
  ms.author="esagmon"
  selfhelptype="Generic"
  supporttopicids="32786001"
  productpesids="16690"
  cloudenvironments="public, fairfax, mooncake, blackforest, ussec, usnat"
  disableclouds=""
  articleid="f8c14a22-a6ff-4bc0-b796-779c9e173d48"
  ownershipid="Azure_Sentinel" />
# Azure Sentinel - Data collection - Connectors based on Agents, OMS and MMA

## **Recommended Steps**

1. Make sure you followed the prerequisites and configuration steps described in the relevant connector page.

2. In case that you are having a general issue with receiving events we suggest to first make sure that your server is connected to the Azure Sentinel Workspace:
    2.1. Check Heartbeat by running the following query:
                             Heartbeat
                             | where TimeGenerated >= 1h
                             | where Computer == "[Computer name]"
                             | take 10

    2.2. [Data collection Health Monitoring](https://docs.microsoft.com/azure/sentinel/monitor-data-connector-health) workbook: 
                             2.2.1. Go to the Agent Info tab
                             2.2.2. Choose the Azure-managed machines tab if you want to view only the Azure Arc-managed machines; choose the All machines tab to view both managed and non-Azure machines with the Log Analytics agent installed.
                             2.2.3. Search your required machine in the Machine name filter.

3. Security Events collection within the context of a single workspace can be configured from either Azure Security Center or Azure Sentinel, but not from both. 
   If you are onboarding Azure Sentinel in a workspace that is already getting Azure Defender alerts from Azure Security Center, and is set to collect Security Events, follow these [steps](https://docs.microsoft.com/azure/sentinel/connect-windows-security-events)

4. Windows Firewall - in order to validate connectivity or troubleshoot delay on first connection, follow these [steps](https://docs.microsoft.com/azure/sentinel/connect-windows-firewall#enable-the-connector)
              
5. CEF based connector -
              5.1. In order to deploy the log forwarder, please use the [installation script](https://docs.microsoft.com/azure/sentinel/connect-cef-agent?tabs=rsyslog)
              5.2. [Configure your security solution to send CEF messages](https://docs.microsoft.com/azure/sentinel/connect-cef-solution-config)
              5.3. In order to validate connectivity, please use the [troubleshooting script](https://docs.microsoft.com/azure/sentinel/connect-cef-verify?tabs=rsyslog)
              
6. AWS CloudTrails latency issue - AWS CloudTrail has built-in limitations in its LookupEvents API. 
   It allows no more than two transactions per second (TPS) per account, and each query can return a maximum of 50 records. Consequently, if a single tenant constantly generates more than 100 records per second in one region, backlogs and delays in data ingestion will result.

7. If you want to use the same machine to forward both plain Syslog and CEF messages, please follow these [steps](https://docs.microsoft.com/azure/sentinel/connect-syslog) to configure the Rsyslog and disable the auto-sync with the portal.

## **Recommended Documents**

* [CEF connector overview](https://docs.microsoft.com/azure/sentinel/connect-common-event-format)
* [Syslog based connectors](https://docs.microsoft.com/azure/sentinel/connect-syslog)
* [Security Event connector](https://docs.microsoft.com/azure/sentinel/connect-windows-security-events)
* [DNS connector](https://docs.microsoft.com/azure/sentinel/connect-dns)
* [AWS CloudTrail connector documentation and instructions](https://docs.microsoft.com/azure/sentinel/connect-aws)
* [Windows Firewall](https://docs.microsoft.com/azure/sentinel/connect-windows-firewall)