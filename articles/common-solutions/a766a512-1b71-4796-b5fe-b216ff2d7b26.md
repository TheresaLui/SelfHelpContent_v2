<properties
  pagetitle="Azure Pipelines issues related to self-hosted agents"
  service=""
  resource=""
  ms.author="macoope"
  selfhelptype="Generic"
  supporttopicids="32742328"
  resourcetags=""
  productpesids="15543"
  cloudenvironments="public,fairfax,ussec,usnat"
  articleid="a766a512-1b71-4796-b5fe-b216ff2d7b26"
  ownershipid="Azure_DevOps_Services" />
# Azure Pipelines issues related to self-hosted agents

## **Recommended Steps**

You may be having trouble setting up or using a self-hosted agent in Azure Pipelines.

Follow through all the steps before you create a support ticket. If you do need to create a ticket after completing the diagnostic steps, provide information about the path you took and results of the steps you ran in your ticket to expedite the resolution of your problem.

* I am attempting to connect an agent to Azure DevOps, and it's not working

	- Make sure the machine's firewall settings allow outbound connections. Azure Pipelines agents make an [HTTP connection to Azure DevOps](https://docs.microsoft.com/azure/devops/pipelines/agents/agents?#communication).
	- If you require a proxy, ensure it's configured properly. Also make sure the [agent is configured with the proxy details](https://docs.microsoft.com/azure/devops/pipelines/agents/proxy).
	- For both the firewall and the proxy, ensure that [all required hostnames are allowed](https://docs.microsoft.com/azure/devops/pipelines/agents/v2-windows#im-running-a-firewall-and-my-code-is-in-azure-repos-what-urls-does-the-agent-need-to-communicate-with). (Note, the documentation links to the Windows agent topic, but the same permissions are required for a macOS or Linux agent.)
	- Make sure you have [appropriate permissions to configure an agent](https://docs.microsoft.com/azure/devops/pipelines/agents/v2-windows#permissions) on Azure DevOps. (Note, the documentation links to the Windows agent topic, but the same permissions are required for a macOS or Linux agent.)

* I am attempting to update an agent, and it's not working

	- If you use a proxy or firewall, confirm that connections to [all required hostnames are allowed](https://docs.microsoft.com/azure/devops/pipelines/agents/v2-windows#im-running-a-firewall-and-my-code-is-in-azure-repos-what-urls-does-the-agent-need-to-communicate-with). (Note, the documentation links to the Windows agent topic, but the same permissions are required for a macOS or Linux agent.)

* My agent is connected, but is never selected to run any jobs

	- Ensure that your agent advertises all [capabilities](https://docs.microsoft.com/azure/devops/pipelines/agents/agents#capabilities) required by your jobs
	- When you install new software on your agent host, you'll need to restart the agent to pick up new capabilities advertised as environment variables