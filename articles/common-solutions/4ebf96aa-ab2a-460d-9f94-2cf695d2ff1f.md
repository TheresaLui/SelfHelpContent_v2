<properties
  pagetitle="QnA runtime error - Azure search max index limit reached error"
  service=""
  resource=""
  ms.author="camanle"
  selfhelptype="Generic"
  supporttopicids="32689775,32689791"
  productpesids="16919"
  cloudenvironments="public, fairfax, mooncake, blackforest, ussec, usnat"
  articleid="4ebf96aa-ab2a-460d-9f94-2cf695d2ff1f"
  ownershipid="AzureCogSvc_CognitiveServices" />
# QnA runtime error - Azure search max index limit reached error

If you want to publish more than 2 knowledge bases on your Free tier of Azure Search, and you get "QnA runtime error - Azure search max index limit reached" error. You will need to upgrade the Search pricing tier.

The reason you are not able to publish any more KBs despite upgrading QnA pricing tiers is because when you create a QnA resource for the first time, Azure also creates a handful of other resources that are required for the QnA service to run properly. One of these resources is an Azure Search resource, and this is the specific resource that needs to be upgraded in order to host more KBs.

If you plan to have many knowledge bases, upgrade your Azure Cognitive Search service pricing tier.

Currently, you can't perform an in-place upgrade of the Azure search SKU. However, you can create a new Azure search resource with the desired SKU, restore the data to the new resource, and then link it to the QnA Maker stack. To do this, follow these steps:

## **Recommended Steps**

1. Create a new Azure search resource in the Azure portal, and select the desired SKU.

![Azure Search Resource](https://docs.microsoft.com/azure/cognitive-services/qnamaker/media/qnamaker-how-to-upgrade-qnamaker/qnamaker-azuresearch-new.png)

2. Restore the indexes from your original Azure search resource to the new one. See the [backup restore sample code](https://github.com/pchoudhari/QnAMakerBackupRestore)

3. After the data is restored, go to your new Azure search resource, select **Keys**, and write down the **Name** and the **Admin key**:

![Name and Key](https://docs.microsoft.com/azure/cognitive-services/qnamaker/media/qnamaker-how-to-upgrade-qnamaker/qnamaker-azuresearch-keys.png)

4. To link the new Azure search resource to the QnA Maker stack, go to the QnA Maker App Service instance.

![QnA Maker App Service instance.](https://docs.microsoft.com/azure/cognitive-services/qnamaker/media/qnamaker-how-to-upgrade-qnamaker/qnamaker-resource-list-appservice.png)

5. Select **Application settings** and modify the settings in the **AzureSearchName** and **AzureSearchAdminKey** fields from step 3.

![Application Settings](https://docs.microsoft.com/azure/cognitive-services/qnamaker/media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-settings.png)

6. Restart the App Service instance.

![App Service instance](https://docs.microsoft.com/azure/cognitive-services/qnamaker/media/qnamaker-how-to-upgrade-qnamaker/qnamaker-appservice-restart.png)

## **Recommended Documents**

* [Upgrade the Azure Cognitive Search service - GA / Stable Release](https://docs.microsoft.com/azure/cognitive-services/qnamaker/how-to/set-up-qnamaker-service-azure?tabs=v1#upgrade-the-azure-cognitive-search-service)
* [Upgrade the Azure Cognitive Search service - Managed / Preview Release](https://docs.microsoft.com/azure/cognitive-services/qnamaker/how-to/set-up-qnamaker-service-azure?tabs=v2#upgrade-the-azure-cognitive-search-service)